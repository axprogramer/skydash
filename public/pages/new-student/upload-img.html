<!-- This is the doctype declaration for an HTML5 document -->
<!DOCTYPE html>
<!-- This is the opening HTML tag, and the "lang" attribute specifies the language of the document -->
<html lang="en">

<head>
    <!-- This meta tag sets the character set to UTF-8 -->
    <meta charset="UTF-8">
    <!-- This meta tag tells IE to use the latest rendering engine -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- This meta tag sets the viewport to the width of the device and sets the initial zoom level to 1 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- This sets the title of the webpage -->
    <title>Document</title>
</head>

<body>
    <!-- This is an input element of type file, which allows the user to select an image -->
    <input type="file" accept="image/*">
    <!-- This is an image element with an empty src and alt attribute -->
    <!-- <img src="http://drive.google.com/uc?export=view&id=1Bfv8yqzng9mQJ9GYkVlQNuZXmxdJkEao" id="showImg" alt=""> -->
    <!-- <img src="https://drive.google.com/uc?id=1Da6mHDoBuL7VKb1ZyLgoLfmuClNpvqhN" id="showImg" alt="Image"> -->
    <img style="display: block;-webkit-user-select: none;margin: auto;cursor: zoom-out;background-color: hsl(0, 0%, 90%);transition: background-color 300ms;"
        src="https://res.cloudinary.com/doocbmbmb/image/upload/v1709304890/cld-sample.jpg" width="1870" height="1250">
    <!-- <img src="https://drive.usercontent.google.com/download?id=1Da6mHDoBuL7VKb1ZyLgoLfmuClNpvqhN" id="showImg" alt=""> -->
    <!-- <img src="" id="getview" alt=""> -->
    <!-- <img src="https://drive.usercontent.google.com/download?id=1zZNKxpilUyJicaLk3QeOBm3HIkMZORpf&export=view&authuser=0" alt=""> -->
    <!-- This is a script tag, which contains JavaScript code -->
    <script>
        // let link_pic = `http://drive.google.com/uc?export=view&id=${}`
        // This line declares a variable called "url" and assigns it a value of "Api_Endpoint_Url"
        let url = "https://script.google.com/macros/s/AKfycbz8HJ12Mw8_88wM7o8LvsLrzUxyVKPp7PoBnpH1IpKGL6bJHNsSHzFri3xITt7QMTZw/exec";

        // This line declares a variable called "file" and assigns it the value of the first input element on the page
        let file = document.querySelector("input");
        // This line declares a variable called "img" and assigns it the value of the first image element on the page
        let img = document.querySelector("img");
        // This line adds an event listener to the "change" event of the "file" input element
        file.addEventListener('change', () => {
            // This line creates a new FileReader object called "fr"
            let fr = new FileReader();
            // This line adds an event listener to the "loadend" event of the FileReader object
            fr.addEventListener('loadend', () => {
                // This line declares a variable called "res" and assigns it the result of the FileReader object
                let res = fr.result;
                // This line sets the "src" attribute of the "img" element to the value of "res"
                // This line splits the "res" variable into an array, using the string "base64," as the separator, and assigns the second element to a variable called "spt"
                let spt = res.split("base64,")[1];
                // This line creates an object called "obj" with three properties: "base64", "type", and "name"
                let obj = {
                    base64: spt,
                    type: file.files[0].type,
                    name: file.files[0].name
                }
                // This line sends a POST request to the URL specified in the "url" variable, with the "obj" object as the request body
                fetch(url, {
                    method: "POST",
                    body: JSON.stringify(obj)
                })
                    // This line waits for the response from the server and converts it to text
                    .then(r => r.text())
                    // This line logs the response data to the console
                    .then(function (data) {
                        img.src = `http://drive.google.com/uc?export=view&id=${data}`;
                        console.log(data);
                    })

            })
            // This line reads the selected file as a data URL
            fr.readAsDataURL(file.files[0])
        })
    </script>
</body>

</html>